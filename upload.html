<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="assets/img/logo-fav.png">
  <title>Beagle</title>
  <link rel="stylesheet" type="text/css" href="assets/lib/perfect-scrollbar/css/perfect-scrollbar.min.css" />
  <link rel="stylesheet" type="text/css"
    href="assets/lib/material-design-icons/css/material-design-iconic-font.min.css" /><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <link rel="stylesheet" type="text/css" href="assets/lib/datetimepicker/css/bootstrap-datetimepicker.min.css" />
  <link rel="stylesheet" type="text/css" href="assets/lib/daterangepicker/css/daterangepicker.css" />
  <link rel="stylesheet" type="text/css" href="assets/lib/select2/css/select2.min.css" />
  <link rel="stylesheet" type="text/css" href="assets/lib/bootstrap-slider/css/bootstrap-slider.css" />
  <link rel="stylesheet" href="assets/css/style.css" type="text/css" />
  <script src=" https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>

<body>
  <div class="be-wrapper">
    <nav class="navbar navbar-default navbar-fixed-top be-top-header">
      <div class="container-fluid">
        <div class="navbar-header"><a href="#" class="navbar-brand"></a>
        </div>
        <div class="be-right-navbar">
          <ul class="nav navbar-nav navbar-right be-user-nav">
            <li class="dropdown"><a href="#" data-toggle="dropdown" role="button" aria-expanded="false"
                class="dropdown-toggle"><img src="assets/img/avatar.png" alt="Avatar"><span class="user-name">TÃºpac
                  Amaru</span></a>
              <ul role="menu" class="dropdown-menu">
                <li>
                  <div class="user-info">
                    <div class="user-name" id="usernames"></div>
                    <div class="user-position online">Available</div>
                  </div>
                </li>
                <li><a href="#" onclick="logout()"><span class="icon mdi mdi-power"></span> Logout</a></li>
              </ul>
            </li>
          </ul>
          <div class="page-title"><span>Form Elements</span></div>
          <ul class="nav navbar-nav navbar-right be-icons-nav">
            <li class="dropdown"><a href="#" data-toggle="dropdown" role="button" aria-expanded="false"
                class="dropdown-toggle"><span class="icon mdi mdi-notifications"></span><span
                  class="indicator"></span></a>
              <ul class="dropdown-menu be-notifications">
                <li>
                  <div class="title">Notifications<span class="badge">3</span></div>
                  <div class="list">
                    <div class="be-scroller">
                      <div class="content">
                        <ul>
                          <li class="notification notification-unread"><a href="#">
                              <div class="image"><img src="assets/img/avatar2.png" alt="Avatar"></div>
                              <div class="notification-info">
                                <div class="text"><span class="user-name">Jessica Caruso</span> accepted your invitation
                                  to join the team.</div><span class="date">2 min ago</span>
                              </div>
                            </a></li>
                          <li class="notification"><a href="#">
                              <div class="image"><img src="assets/img/avatar3.png" alt="Avatar"></div>
                              <div class="notification-info">
                                <div class="text"><span class="user-name">Joel King</span> is now following you</div>
                                <span class="date">2 days ago</span>
                              </div>
                            </a></li>
                          <li class="notification"><a href="#">
                              <div class="image"><img src="assets/img/avatar4.png" alt="Avatar"></div>
                              <div class="notification-info">
                                <div class="text"><span class="user-name">John Doe</span> is watching your main
                                  repository</div><span class="date">2 days ago</span>
                              </div>
                            </a></li>
                          <li class="notification"><a href="#">
                              <div class="image"><img src="assets/img/avatar5.png" alt="Avatar"></div>
                              <div class="notification-info"><span class="text"><span class="user-name">Emily
                                    Carter</span> is now following you</span><span class="date">5 days ago</span></div>
                            </a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="footer"> <a href="#">View all notifications</a></div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="be-left-sidebar">
      <div class="left-sidebar-wrapper"><a href="#" class="left-sidebar-toggle">Dashboard</a>
        <div class="left-sidebar-spacer">
          <div class="left-sidebar-scroll">
            <div class="left-sidebar-content">
              <ul class="sidebar-elements">
                <li class="divider">Menu</li>
                <li class="active"><a href="index.html"><i class="icon mdi mdi-home"></i><span>Dashboard</span></a>
                </li>
                <li class="parent"><a href="#"><i class="icon mdi mdi-globe"></i><span>Upload</span></a>
                  <ul class="sub-menu">
                    <li><a href="upload.html">Upload</a>
                    </li>
                    <li><a href="history.html">History</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="be-content">
      <div class="page-head">
        <h2 class="page-head-title">Form Elements</h2>
        <ol class="breadcrumb page-head-nav">
          <li><a href="#">Home</a></li>
          <li><a href="#">Forms</a></li>
          <li class="active">Elements</li>
        </ol>
      </div>
      <div class="main-content container-fluid">
        <!--Basic forms-->

        <!--Basic Elements-->

        <!--Input File-->
        <div class="row">
          <div class="col-md-12">
            <div class="panel panel-default panel-border-color panel-border-color-primary">
              <div class="panel-heading panel-heading-divider">Input File<span class="panel-subtitle">These are the
                  input file options</span></div>
              <div class="panel-body">
                <form action="#" style="border-radius: 0px;" enctype="multipart/form-data" onsubmit="importDataParkir(); return false;" class="form-horizontal group-border-dashed">
                  <div class="form-group">
                    <label class="col-sm-3 control-label">Button File Input</label>
                    <div class="col-sm-6">
                      <input type="file" name="file-1" id="file-1" data-multiple-caption="{count} files selected"
                        class="inputfile">
                      <label for="file-1" class="btn-default"> <i class="mdi mdi-upload"></i><span>Browse files...
                        </span></label>
                        <br />
                      <p>
                        <button class="btn btn-primary w-100" id="btns" type="submit">Simpan</button>
                      </p>
                      <br />
                      <p>
                        <h3 id="success"></h3>
                      </p>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <!--Sizing-->

        <!--Select & Option Elements-->

        <!--Validation States-->

        <!--Input Groups-->

        <!--Swtich Component-->

        <!--Datepicker-->

        <!--Date Range picker-->

        <!--Select2 & Slider-->
      </div>
    </div>
  </div>
  <script src="assets/lib/jquery/jquery.min.js" type="text/javascript"></script>
  <script src="assets/lib/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
  <script src="assets/js/main.js" type="text/javascript"></script>
  <script src="assets/lib/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="assets/lib/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
  <script src="assets/lib/jquery.nestable/jquery.nestable.js" type="text/javascript"></script>
  <script src="assets/lib/moment.js/min/moment.min.js" type="text/javascript"></script>
  <script src="assets/lib/datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
  <script src="assets/lib/daterangepicker/js/daterangepicker.js" type="text/javascript"></script>
  <script src="assets/lib/select2/js/select2.min.js" type="text/javascript"></script>
  <script src="assets/lib/select2/js/select2.full.min.js" type="text/javascript"></script>
  <script src="assets/lib/bootstrap-slider/js/bootstrap-slider.js" type="text/javascript"></script>
  <script src="assets/js/app-form-elements.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      //initialize the javascript
      App.init();
      App.formElements();
    });

    document.addEventListener("DOMContentLoaded", async (e) => {
      let cookie = {};
      var a = document.cookie.split(';');
      for (var i = 0; i < a.length; i++) {
        var b = a[i].split('=');
        var [key, value] = b;
        cookie[key.trim()] = value;
      }

      if (!cookie['username']) {
        window.location.replace('login.html');
      } else {
        let url = 'api.php?act=profile&un=' + cookie['username'];
        console.log(url);
        await fetch(url)
          .then(response => response.json())
          .then((data) => {
            document.getElementById("usernames").innerText = data?.username.toUpperCase();
          }).catch((error) => {
            console.log(error)
          })
      }
    });


    function logout() {
      let cookie = {};
      var a = document.cookie.split(';');
      for (var i = 0; i < a.length; i++) {
        var b = a[i].split('=');
        var [key, value] = b;
        cookie[key.trim()] = value;
      }
      swal({
        title: "Are you sure?",
        text: "to Leave this Page ??",
        icon: "warning",
        buttons: true,
        dangerMode: true,
      })
        .then((willOut) => {
          if (willOut) {
            document.cookie = `username=${cookie['username']}; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/`;
            document.cookie = `username=${cookie['id_user']}; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/`;
            window.location.replace('login.html');
          } else {
            console.log('NaN')
          }
        });
    }


    function importDataParkir(){
        document.getElementById("success").innerHTML = 'Please Wait....';
        document.getElementById("btns").disabled = true;
        let filecsv = document.getElementById("file-1").files[0];
        let fd = new FormData();
            fd.append("filecsv", filecsv);
        fetch('api.php?act=insert_csv', { 
            method: "POST",
            body: fd,
        })
        .then(response => response.json())
        .then((data)=>{
            console.log(data)
            document.getElementById("success").innerHTML = 'Success Uploaded.';
            document.getElementById("btns").disabled = false;
            // window.location.reload();
        }).catch((error) => {
                    console.error(error);
        });    

    }

  </script>
</body>

</html>